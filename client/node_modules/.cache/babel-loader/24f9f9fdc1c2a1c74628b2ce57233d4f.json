{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kalle\\\\Downloads\\\\Online_Voting2-master\\\\Online_Voting2-master\\\\client\\\\src\\\\components\\\\screens\\\\Signup2.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { sName, bName } from '../utils';\nimport M from 'materialize-css';\n\nconst SignUp = () => {\n  const history = useHistory();\n  const [firstname, setFirstName] = useState(\"\");\n  const [lastname, setLastName] = useState(\"\");\n  const [password, setPasword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [stateName, setStateName] = useState(\"\");\n  const [mobile, setMobile] = useState(\"\");\n  const [branch, setBranch] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [url, setUrl] = useState(undefined);\n  useEffect(() => {\n    if (url) {\n      uploadFields();\n    }\n  }, [url]);\n\n  const uploadPic = () => {\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"voting\");\n    data.append(\"cloud_name\", \"dvfpkko1z\");\n    fetch(\"https://api.cloudinary.com/v1_1/dvfpkko1z/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => {\n      setUrl(data.url);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const uploadFields = () => {\n    if (!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)) {\n      M.toast({\n        html: \"invalid email\",\n        classes: \"#c62828 red darken-3\"\n      });\n      return;\n    } // const obj = {firstname,lastname,password,email,city,stateName,mobile,branch,pic:url}\n    // console.log(obj)\n\n\n    fetch(\"http://localhost:5000/signup\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        firstname,\n        lastname,\n        password,\n        email,\n        city,\n        stateName,\n        mobile,\n        branch,\n        pic: url\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.error) {\n        M.toast({\n          html: data.error,\n          classes: \"#c62828 red darken-3\"\n        });\n      } else {\n        M.toast({\n          html: data.message,\n          classes: \"#43a047 green darken-1\"\n        });\n        history.push('/signin');\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const PostData = () => {\n    if (image) {\n      uploadPic();\n    } else {\n      uploadFields();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-5\",\n    style: {\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card px-5 py-2\",\n    style: {\n      margin: \"5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    style: {\n      margin: \"auto\",\n      marginBottom: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \"Registration\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    value: firstname,\n    onChange: e => setFirstName(e.target.value),\n    placeholder: \"First Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    value: lastname,\n    onChange: e => setLastName(e.target.value),\n    placeholder: \"Last Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"email\",\n    value: email,\n    className: \"form-control\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    value: password,\n    onChange: e => setPasword(e.target.value),\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    placeholder: \"city\",\n    value: city,\n    onChange: e => setCity(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-select\",\n    value: stateName,\n    onChange: e => setStateName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, sName.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    value: item,\n    key: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, \" \", item, \" \"))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    value: mobile,\n    onChange: e => setMobile(e.target.value),\n    className: \"form-control\",\n    placeholder: \"Reg No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-select\",\n    placeholder: \"voter\",\n    value: branch,\n    onChange: e => setBranch(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, bName.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    value: item,\n    key: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, \" \", item, \" \"))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"form-control\",\n    onChange: e => setImage(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"input-group-text\",\n    for: \"inputGroupFile02\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, \"Upload\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success mb-4 mt-2\",\n    onClick: () => PostData(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 12\n    }\n  }, \"Register\")));\n};\n\nexport default SignUp;","map":{"version":3,"sources":["C:/Users/kalle/Downloads/Online_Voting2-master/Online_Voting2-master/client/src/components/screens/Signup2.js"],"names":["React","useState","useEffect","useHistory","sName","bName","M","SignUp","history","firstname","setFirstName","lastname","setLastName","password","setPasword","email","setEmail","city","setCity","stateName","setStateName","mobile","setMobile","branch","setBranch","image","setImage","url","setUrl","undefined","uploadFields","uploadPic","data","FormData","append","fetch","method","body","then","res","json","catch","err","console","log","test","toast","html","classes","headers","JSON","stringify","pic","error","message","push","PostData","margin","marginBottom","e","target","value","map","item","files"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {useHistory} from 'react-router-dom'\nimport { sName,bName } from '../utils'\nimport M from 'materialize-css'\nconst SignUp  = ()=>{\n    const history = useHistory()\n    const [firstname,setFirstName] = useState(\"\")\n    const [lastname,setLastName] = useState(\"\")\n    const [password,setPasword] = useState(\"\")\n    const [email,setEmail] = useState(\"\")\n    const [city,setCity] = useState(\"\")\n    const [stateName,setStateName] = useState(\"\")\n    const [mobile,setMobile] = useState(\"\")\n    const [branch,setBranch] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(undefined)\n    useEffect(()=>{\n        if(url){\n            uploadFields()\n        }\n    },[url])\n    const uploadPic = () => {\n        const data = new FormData();\n        data.append(\"file\", image);\n        data.append(\"upload_preset\", \"voting\");\n        data.append(\"cloud_name\", \"dvfpkko1z\");\n        fetch(\"https://api.cloudinary.com/v1_1/dvfpkko1z/image/upload\", {\n          method: \"post\",\n          body: data,\n        })\n          .then((res) => res.json())\n          .then((data) => {\n            setUrl(data.url);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      };\n    const uploadFields = ()=>{\n        if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\n            M.toast({html: \"invalid email\",classes:\"#c62828 red darken-3\"})\n            return\n        }\n        // const obj = {firstname,lastname,password,email,city,stateName,mobile,branch,pic:url}\n        // console.log(obj)\n        fetch(\"http://localhost:5000/signup\",{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body:JSON.stringify({\n                firstname,lastname,password,email,city,stateName,mobile,branch,pic:url\n            })\n        }).then(res=>res.json())\n        .then(data=>{\n           if(data.error){\n              M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n           }\n           else{\n               M.toast({html:data.message,classes:\"#43a047 green darken-1\"})\n               history.push('/signin')\n           }\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n    const PostData = ()=>{\n        if(image){\n            uploadPic()\n        }else{\n            uploadFields()\n        }\n       \n    }\n\n   return (\n      <div className='col-5' style={{margin:'auto'}}>\n          <div className=\"card px-5 py-2\" style={{margin:\"5%\"}}>\n          <h4 style={{margin:\"auto\",marginBottom:\"20px\"}}>Registration</h4>\n          <div className=\"row\">\n            <div className=\"col\">\n                <input type=\"text\" class=\"form-control\"   value={firstname} onChange={(e)=>setFirstName(e.target.value)} placeholder=\"First Name\" />\n           \n            </div>\n            <div className=\"col\">\n            <input type=\"text\" class=\"form-control\"   value={lastname} onChange={(e)=>setLastName(e.target.value)} placeholder=\"Last Name\" />\n            </div>\n          </div>\n          <br />\n          <div className=\"row\">\n            <div className=\"col\">\n            <input\n            type=\"text\"\n            placeholder=\"email\"\n            value={email}\n           className='form-control'\n            onChange={(e)=>setEmail(e.target.value)}\n            />\n            </div>\n            <div className=\"col\">\n            <input\n            type=\"password\"\n            placeholder=\"password\"\n            value={password}\n            onChange={(e)=>setPasword(e.target.value)}\n            className='form-control'\n            />\n            </div>\n          </div>\n          <br />\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n                \n            <input\n            className='form-control'\n            type=\"text\"\n            placeholder=\"city\"\n            value={city}\n            onChange={(e)=>setCity(e.target.value)}\n           \n            />\n            </div>\n        <div className=\"col-md-6\">\n            \n            <select  className=\"form-select\" value={stateName}onChange={(e)=> setStateName(e.target.value)}  >\n            {sName.map((item) => (\n                  <option value={item} key={item} >\n                    {\" \"}\n                    {item}{\" \"}\n                  </option>\n                ))}\n            </select>\n        </div>\n\n\n        \n        </div>\n        <br />\n        <div className=\"row\">\n            <div className=\"col-md-6\">\n                \n                <input type=\"number\" value={mobile} onChange={e => setMobile(e.target.value)} className=\"form-control\" placeholder='Reg No'/>\n            </div>\n        <div className=\"col-md-6\">\n            \n            <select  className=\"form-select\" placeholder='voter'value={branch} onChange={(e)=> setBranch(e.target.value)}>\n            {bName.map((item) => (\n                  <option value={item} key={item}>\n                    {\" \"}\n                    {item}{\" \"}\n                  </option>\n                ))}\n            </select>\n        </div>\n\n\n        \n        </div>\n        <br />\n        <div className=\"input-group mb-3\">\n            <input type=\"file\" className=\"form-control\" onChange={(e)=>setImage(e.target.files[0])}/>\n            <label className=\"input-group-text\" for=\"inputGroupFile02\">Upload</label>\n        </div>\n           <button className='btn btn-success mb-4 mt-2' onClick={() => PostData()}>Register</button>\n      </div>\n      </div>\n   )\n}\n\n\nexport default SignUp"]},"metadata":{},"sourceType":"module"}