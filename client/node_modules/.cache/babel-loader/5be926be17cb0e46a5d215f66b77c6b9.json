{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kalle\\\\Downloads\\\\Online_Voting2-master\\\\Online_Voting2-master\\\\client\\\\src\\\\components\\\\screens\\\\Home.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport swal from 'sweetalert';\nimport { UserContext } from '../../App';\nimport Profile from \"./Profile\";\n\nconst Home = () => {\n  const [data, setData] = useState([]);\n  const {\n    state\n  } = useContext(UserContext);\n  useEffect(() => {\n    fetch('http://localhost:5000/allpost', {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      setData(result.posts);\n    });\n  }, []);\n\n  const votePlayer = (id, userId) => {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once selected, you will not be able to reselect the options!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        fetch('http://localhost:5000/vote', {\n          method: \"put\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n          },\n          body: JSON.stringify({\n            postId: id,\n            userId\n          })\n        }).then(res => res.json()).then(result => {\n          //   console.log(result)\n          const newData = data.map(item => {\n            if (item._id == result._id) {\n              return result;\n            } else {\n              return item;\n            }\n          });\n          setData(newData);\n        }).catch(err => {\n          console.log(err);\n        });\n        swal(\"You successfully has given your vote!\", {\n          icon: \"success\"\n        });\n      } else {\n        swal(\"Again ,select your option!\");\n      }\n    });\n  };\n\n  let isVote;\n\n  if (JSON.parse(localStorage.getItem(\"user\")) !== null) {\n    isVote = JSON.parse(localStorage.getItem(\"user\"))._id;\n  }\n\n  const userId = JSON.parse(localStorage.getItem(\"user\")) ? JSON.parse(localStorage.getItem(\"user\"))._id : null;\n  const userIdExist = data.map(item => item.votes.filter(item => item));\n  let newVlaue = false;\n\n  for (let key of userIdExist) {\n    if (key.length > 0) {\n      for (let key2 of key) {\n        if (key2 === isVote) {\n          newVlaue = true;\n        }\n      }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    style: {\n      margin: \"auto\",\n      paddingTop: \"5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    style: {\n      float: \"left\",\n      border: \"1px solid green\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Profile, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    style: {\n      float: \"right\",\n      backgroundColor: \"white\",\n      padding: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 12\n    }\n  }, data.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item._id,\n      style: {\n        marginBottom: \"10px\",\n        backgroundColor: \"#f2f4f6\",\n        height: \"100px\",\n        borderRadius: \"15px\",\n        padding: \"25px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {},\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 28\n      }\n    }, index + 1)), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      style: {},\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 28\n      }\n    }, item.title.split(\" \")[0])), /*#__PURE__*/React.createElement(\"img\", {\n      src: item.photo,\n      style: {\n        height: \"200px\",\n        width: \"200px\"\n      },\n      style: {\n        width: \"60px\",\n        height: \"60px\"\n      },\n      alt: \"image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 29\n      }\n    }, !item.votes.includes(state._id) && newVlaue == false ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \" btn btn-success\",\n      style: {},\n      onClick: () => {\n        votePlayer(item._id, userId);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 29\n      }\n    }, \"Vote\") : \"\", newVlaue ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn disabled\",\n      style: {\n        marginLeft: \"47px\",\n        background: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 34\n      }\n    }, \"Already Voted\") : \"\")));\n  }))));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/kalle/Downloads/Online_Voting2-master/Online_Voting2-master/client/src/components/screens/Home.js"],"names":["React","useState","useEffect","useContext","swal","UserContext","Profile","Home","data","setData","state","fetch","headers","localStorage","getItem","then","res","json","result","console","log","posts","votePlayer","id","userId","title","text","icon","buttons","dangerMode","willDelete","method","body","JSON","stringify","postId","newData","map","item","_id","catch","err","isVote","parse","userIdExist","votes","filter","newVlaue","key","length","key2","margin","paddingTop","float","border","backgroundColor","padding","index","marginBottom","height","borderRadius","display","flexDirection","justifyContent","split","photo","width","includes","marginLeft","background"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useContext} from 'react'\nimport swal from 'sweetalert'\nimport {UserContext} from '../../App'\nimport Profile from \"./Profile\";\n\nconst Home  = ()=>{\n    const [data,setData] = useState([])\n    const {state} = useContext(UserContext)\n    useEffect(()=>{\n       fetch('http://localhost:5000/allpost',{\n           headers:{\n               \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n           }\n       }).then(res=>res.json())\n       .then(result=>{\n            console.log(result)\n           setData(result.posts)\n       })\n    },[])\n\n    const votePlayer = (id,userId)=>{\n        swal({\n            title: \"Are you sure?\",\n            text: \"Once selected, you will not be able to reselect the options!\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n                fetch('http://localhost:5000/vote',{\n                    method:\"put\",\n                    headers:{\n                        \"Content-Type\":\"application/json\",\n                        \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n                    },\n                    body:JSON.stringify({\n                        postId:id,\n                        userId\n                    })\n                }).then(res=>res.json())\n                .then(result=>{\n                         //   console.log(result)\n                  const newData = data.map(item=>{\n                      if(item._id==result._id){\n                          return result\n                      }else{\n                          return item\n                      }\n                  })\n                  setData(newData)\n                }).catch(err=>{\n                    console.log(err)\n                })  \n              swal(\"You successfully has given your vote!\", {\n                icon: \"success\",\n              });\n            } else {\n              swal(\"Again ,select your option!\");\n            }\n          });\n         \n    }\n   \n    let isVote ; \n    if(JSON.parse(localStorage.getItem(\"user\")) !== null){\n        isVote = JSON.parse(localStorage.getItem(\"user\"))._id;\n    }\n   \n    const userId = JSON.parse(localStorage.getItem(\"user\")) ?  JSON.parse(localStorage.getItem(\"user\"))._id : null ;\n \n    const userIdExist = (data.map(item => item.votes.filter(item => item )));\n    let newVlaue = false;\n    for(let key of userIdExist) {\n      if(key.length > 0 ){\n         \n         for(let key2 of key){\n             if(key2 === isVote){\n                newVlaue = true ;\n             }\n        }\n      }\n    }\n  \n   return (\n       <div >\n           <div className=\"col-md-8\" style={{margin:\"auto\",paddingTop:\"5%\"}} >\n           <div className='col-md-3' style={{float:\"left\",border:\"1px solid green\"}}>\n            <Profile />\n           </div>\n            {/* <div className=\"col-md-2\"  style={{border:\"2px solid black\"}} ></div> */}\n           <div className='col-md-8' style={{float:\"right\",backgroundColor:\"white\",padding:\"10px\"}}>\n               \n           {\n            \n               data.map((item,index)=>{\n                   return(\n                    \n                      <div key={item._id} \n                      style={{marginBottom:\"10px\",backgroundColor:\"#f2f4f6\",height:\"100px\",borderRadius:\"15px\",padding:\"25px\"}} > \n                        \n                       <div style={{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"}}  >\n                       <h6><b style={{}}>{index + 1}</b></h6>\n                       <h6><b style={{}}>{item.title.split(\" \")[0]}</b></h6>\n                       \n                                <img src={item.photo} style={{height:\"200px\",width:\"200px\"}} \n                                style={{width:\"60px\",height:\"60px\"}} alt='image'\n                                />\n                       \n                            <div className=\"card-content\">\n                          \n                            {!item.votes.includes(state._id ) && newVlaue == false\n                            ? \n                           \n                            <button  className=\" btn btn-success\"  style={{}}\n                            onClick={()=>{votePlayer(item._id,userId)}}>Vote</button>\n                            : \"\"\n                            }\n                            {\n                                newVlaue ?\n                                 <button className=\"btn disabled\" style={{marginLeft:\"47px\",background:\"red\"}}>\n                                     Already Voted</button> : \"\"\n                            }\n                           \n                               \n                            \n                             \n                             \n                                </div>    \n                            </div>\n\n                        </div>\n                   \n                   )\n               })\n           }\n         </div> \n \n        </div>\n       </div>\n   )\n}\n\n\nexport default Home"]},"metadata":{},"sourceType":"module"}